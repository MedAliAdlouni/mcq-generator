<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{% block title %}QuizAI{% endblock %} | QuizAI</title>
  <!-- Tab icon -->
  <link rel="icon" href="{{ url_for('static', filename='img/favicon.ico') }}">
  <link rel="icon" type="image/png" href="{{ url_for('static', filename='img/favicon.png') }}?v=3">
  <meta name="theme-color" content="#6366f1">

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#6366f1',
            accent: '#f59e0b',
            softgray: '#f8fafc',
            pastelgreen: '#d1fae5',
            pastelyellow: '#fef3c7',
            pastelred: '#fee2e2',
            pastelblue: '#dbeafe',
          },
          animation: {
            'gradient': 'gradient 8s linear infinite',
            'float': 'float 6s ease-in-out infinite',
            'glow': 'glow 2s ease-in-out infinite alternate',
          },
          keyframes: {
            gradient: {
              '0%, 100%': { backgroundPosition: '0% 50%' },
              '50%': { backgroundPosition: '100% 50%' },
            },
            float: {
              '0%, 100%': { transform: 'translateY(0px)' },
              '50%': { transform: 'translateY(-10px)' },
            },
            glow: {
              '0%': { boxShadow: '0 0 20px rgba(99, 102, 241, 0.3)' },
              '100%': { boxShadow: '0 0 30px rgba(99, 102, 241, 0.6)' },
            }
          }
        }
      }
    }
  </script>

  <!-- Custom styles -->
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');
    
    * {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
    }

    body {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      background-size: 400% 400%;
      animation: gradient 15s ease infinite;
      position: relative;
      overflow-x: hidden;
    }

    body::before {
      content: "";
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: 
        radial-gradient(circle at 20% 50%, rgba(99, 102, 241, 0.15) 0%, transparent 50%),
        radial-gradient(circle at 80% 80%, rgba(168, 85, 247, 0.15) 0%, transparent 50%),
        radial-gradient(circle at 40% 20%, rgba(59, 130, 246, 0.1) 0%, transparent 50%);
      pointer-events: none;
      z-index: 0;
    }

    .glass-effect {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(20px) saturate(180%);
      border: 1px solid rgba(255, 255, 255, 0.3);
    }

    .btn {
      display: inline-block;
      font-size: 0.875rem;
      font-weight: 600;
      padding: 0.625rem 1.25rem;
      border-radius: 0.75rem;
      min-width: 110px;
      text-align: center;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
      overflow: hidden;
    }
    
    .btn::before {
      content: "";
      position: absolute;
      top: 50%;
      left: 50%;
      width: 0;
      height: 0;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.3);
      transform: translate(-50%, -50%);
      transition: width 0.6s, height 0.6s;
    }
    
    .btn:hover::before {
      width: 300px;
      height: 300px;
    }

    .btn-green { 
      background: linear-gradient(135deg, #10b981 0%, #059669 100%);
      color: white;
      box-shadow: 0 4px 15px rgba(16, 185, 129, 0.3);
    }
    .btn-green:hover { 
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(16, 185, 129, 0.4);
    }
    
    .btn-yellow { 
      background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
      color: white;
      box-shadow: 0 4px 15px rgba(245, 158, 11, 0.3);
    }
    .btn-yellow:hover { 
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(245, 158, 11, 0.4);
    }
    
    .btn-red { 
      background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
      color: white;
      box-shadow: 0 4px 15px rgba(239, 68, 68, 0.3);
    }
    .btn-red:hover { 
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(239, 68, 68, 0.4);
    }
    
    .btn-gray { 
      background: linear-gradient(135deg, #6b7280 0%, #4b5563 100%);
      color: white;
      box-shadow: 0 4px 15px rgba(107, 114, 128, 0.3);
    }
    .btn-gray:hover { 
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(107, 114, 128, 0.4);
    }

    .nav-link {
      position: relative;
      padding: 0.5rem 1rem;
      border-radius: 0.5rem;
      transition: all 0.3s ease;
      font-weight: 500;
    }
    
    .nav-link::before {
      content: "";
      position: absolute;
      bottom: 0;
      left: 50%;
      width: 0;
      height: 2px;
      background: linear-gradient(90deg, #6366f1, #8b5cf6);
      transform: translateX(-50%);
      transition: width 0.3s ease;
    }
    
    .nav-link:hover {
      background: rgba(99, 102, 241, 0.1);
    }
    
    .nav-link:hover::before {
      width: 80%;
    }

    .logo-container {
      position: relative;
      animation: float 6s ease-in-out infinite;
    }

    .logo-orb {
      position: relative;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      box-shadow: 
        0 8px 32px rgba(99, 102, 241, 0.4),
        inset 0 -2px 12px rgba(0, 0, 0, 0.1);
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .logo-orb::before {
      content: "";
      position: absolute;
      inset: -2px;
      border-radius: 1rem;
      background: linear-gradient(135deg, #818cf8, #a78bfa, #c084fc);
      opacity: 0;
      filter: blur(12px);
      transition: opacity 0.4s ease;
    }

    .logo-container:hover .logo-orb {
      transform: scale(1.1) rotate(5deg);
      box-shadow: 
        0 12px 48px rgba(99, 102, 241, 0.6),
        inset 0 -2px 12px rgba(0, 0, 0, 0.1);
    }

    .logo-container:hover .logo-orb::before {
      opacity: 0.6;
    }

    .gradient-text {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      font-weight: 800;
      letter-spacing: -0.02em;
    }

    .primary-btn {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 0.625rem 1.5rem;
      border-radius: 0.75rem;
      font-weight: 600;
      box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
      overflow: hidden;
    }

    .primary-btn::after {
      content: "";
      position: absolute;
      top: 50%;
      left: 50%;
      width: 0;
      height: 0;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.3);
      transform: translate(-50%, -50%);
      transition: width 0.6s, height 0.6s;
    }

    .primary-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(102, 126, 234, 0.5);
    }

    .primary-btn:hover::after {
      width: 300px;
      height: 300px;
    }

    .secondary-btn {
      border: 2px solid;
      border-image: linear-gradient(135deg, #667eea, #764ba2) 1;
      background: white;
      color: #667eea;
      padding: 0.575rem 1.5rem;
      border-radius: 0.75rem;
      font-weight: 600;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }

    .secondary-btn::before {
      content: "";
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, #667eea, #764ba2);
      transition: left 0.4s ease;
      z-index: -1;
    }

    .secondary-btn:hover {
      color: white;
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
    }

    .secondary-btn:hover::before {
      left: 0;
    }

    .content-card {
      background: rgba(255, 255, 255, 0.98);
      backdrop-filter: blur(20px);
      border-radius: 1.5rem;
      box-shadow: 
        0 20px 60px rgba(0, 0, 0, 0.1),
        0 0 0 1px rgba(255, 255, 255, 0.5);
      border: 1px solid rgba(255, 255, 255, 0.3);
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .content-card:hover {
      transform: translateY(-4px);
      box-shadow: 
        0 30px 80px rgba(0, 0, 0, 0.15),
        0 0 0 1px rgba(255, 255, 255, 0.5);
    }

    .flash-message {
      border-radius: 1rem;
      padding: 1rem 1.5rem;
      animation: slideDown 0.4s ease;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
    }

    @keyframes slideDown {
      from {
        opacity: 0;
        transform: translateY(-20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes footerScroll {
      0% { transform: translateX(100%); }
      100% { transform: translateX(-100%); }
    }
    
    .animate-footer-scroll {
      display: inline-block;
      animation: footerScroll 30s linear infinite;
    }

    .user-badge {
      background: linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%);
      padding: 0.5rem 1rem;
      border-radius: 0.75rem;
      font-weight: 600;
      color: #374151;
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
    }
  </style>
</head>

<body class="flex flex-col min-h-screen">

  <!-- Header -->
  <header class="glass-effect shadow-xl fixed w-full top-0 z-50">
    <nav class="container mx-auto flex justify-between items-center px-6 py-4">
      <a href="/" class="logo-container flex items-center gap-3 transition">
        <!-- Logo orb -->
        <div class="logo-orb flex items-center justify-center h-12 w-12 rounded-xl relative z-10">
          <img src="{{ url_for('static', filename='img/logo.svg') }}" alt="QuizAI logo" class="h-7 w-7 relative z-10 brightness-0 invert">
        </div>

        <!-- Logo text -->
        <span class="text-2xl gradient-text">
          QuizAI
        </span>
      </a>

      <!-- Navigation links -->
      <div class="flex items-center space-x-3 text-sm">
        <a href="{{ url_for('ui.show_documents') }}" class="nav-link">
          üìö Courses
        </a>

        <a href="{{ url_for('ui.show_results') }}" class="nav-link">
          üìä Results
        </a>

        {% if current_user.is_authenticated %}
          <span class="user-badge">
            <span>üëã</span>
            <span>{{ current_user.username }}</span>
          </span>

          <a href="{{ url_for('auth.logout') }}" class="primary-btn">
            Logout
          </a>
        {% else %}
          <a href="{{ url_for('auth.login') }}" class="secondary-btn">
            üîë Login
          </a>

          <a href="{{ url_for('auth.register') }}" class="primary-btn">
            ‚úçÔ∏è Register
          </a>
        {% endif %}
      </div>
    </nav>
  </header>

  <!-- Main -->
  <main class="container mx-auto flex-1 mt-28 mb-12 px-6 relative z-10">
    {% with messages = get_flashed_messages(with_categories=True) %}
      {% if messages %}
        <div class="max-w-2xl mx-auto mb-8">
          {% for category, message in messages %}
            <div class="flash-message mb-3 font-medium
                        {% if category == 'error' %}bg-gradient-to-r from-red-50 to-red-100 text-red-800 border-l-4 border-red-500
                        {% else %}bg-gradient-to-r from-green-50 to-green-100 text-green-800 border-l-4 border-green-500{% endif %}">
              {{ message }}
            </div>
          {% endfor %}
        </div>
      {% endif %}
    {% endwith %}
    {% block content %}{% endblock %}
  </main>

  <!-- Footer -->
  <footer class="glass-effect border-t border-white/20 overflow-hidden py-8 mt-auto relative z-10">
    <div class="whitespace-nowrap animate-footer-scroll text-gray-700 text-sm font-semibold">
      <span class="mx-8">‚ú® &copy; {{ app_name }} {{ current_year }} ‚Äî {{ app_tagline }}</span>
      <span class="mx-8">üöÄ Powered by AI</span>
      <span class="mx-8">üí° Smart Learning</span>
      <span class="mx-8">‚ú® &copy; {{ app_name }} {{ current_year }} ‚Äî {{ app_tagline }}</span>
      <span class="mx-8">üöÄ Powered by AI</span>
      <span class="mx-8">üí° Smart Learning</span>
    </div>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>
</html>